<!DOCTYPE HTML>
<html lang="">
<head>
    

<head>
    <meta charset="utf-8">
    <meta name="keywords" content="mysql-create_user, FunU">
    <meta name="description" content="常规用法create user your_user; 
set password for you_user=password(&#34;your_password&#34;);
grant all privileges on *.* to you_user">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>mysql-create_user | FunU</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

</head>

<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">FunU</span>
                    </a>
                </div>
                <a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-anchor"></i>
            
            <span>Index</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>Tags</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-snowflake-o"></i>
            
            <span>Categories</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-dot-circle-o"></i>
            
            <span>Archives</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user"></i>
            
            <span>About</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">FunU</div>
        <div class="logo-desc">
            
            show me the f***ing source code!
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-anchor"></i>
                
                Index
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                Tags
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-snowflake-o"></i>
                
                Categories
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-dot-circle-o"></i>
                
                Archives
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user"></i>
                
                About
            </a>
        </li>
        
        
    </ul>

    <div class="social-link"><a href="mailto:xxx@example.com" class="tooltipped" target="_blank" data-tooltip="-> Email" data-position="top"
    data-delay="50">
    <i class="fa fa-envelope fa-lg"></i>
</a>
<a href="https://twitter.com" class="tooltipped" data-tooltip="-> Twitter" data-position="top" data-delay="50">
    <i class="fa fa-twitter fa-lg"></i>
</a>
<a href="https://facebook.com" class="tooltipped" data-tooltip="-> Facebook" data-position="top" data-delay="50">
    <i class="fa fa-facebook-official fa-lg"></i>
</a>
<a href="https://instagram.com" class="tooltipped" data-tooltip="-> Ins" data-position="top" data-delay="50">
    <i class="fa fa-instagram fa-lg"></i>
</a>
</div>
</div>



            </div>
        </div>

        
    </nav>
</header>



<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/13.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        mysql-create_user
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            
            <div class="article-tag">
                
                <a href="/tags/mysql/" target="_blank">
                    <span class="chip bg-color">mysql</span>
                </a>
                
            </div>
            
            <div class="post-info">
                
                <span class="post-cate">
                    <i class="fa fa-bookmark fa-fw icon-category"></i>
                    
                    <a href="/categories/DB/" class="post-category" target="_blank">
                        DB
                    </a>
                    
                </span>
                

                <span class="post-date">
                    <i class="fa fa-clock-o fa-fw"></i>2018-10-14
                </span>
            </div>
        </div>
        <hr>
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="常规用法"><a href="#常规用法" class="headerlink" title="常规用法"></a>常规用法</h2><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">user</span> your_user<span class="token punctuation">;</span> 
<span class="token keyword">set</span> password <span class="token keyword">for</span> you_user<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">"your_password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> you_user identified <span class="token keyword">by</span> <span class="token string">"your_password"</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="官方用法"><a href="#官方用法" class="headerlink" title="官方用法"></a>官方用法</h2><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span>
    <span class="token keyword">user</span> <span class="token punctuation">[</span>auth_option<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">user</span> <span class="token punctuation">[</span>auth_option<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token keyword">REQUIRE</span> {NONE <span class="token operator">|</span> tls_option <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">AND</span><span class="token punctuation">]</span> tls_option<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>}<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">WITH</span> resource_option <span class="token punctuation">[</span>resource_option<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span>password_option <span class="token operator">|</span> lock_option<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">user</span>:
    <span class="token punctuation">(</span>see Section <span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">,</span> “Specifying Account Names”<span class="token punctuation">)</span>

auth_option: {
    IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'auth_string'</span>
  <span class="token operator">|</span> IDENTIFIED <span class="token keyword">WITH</span> auth_plugin
  <span class="token operator">|</span> IDENTIFIED <span class="token keyword">WITH</span> auth_plugin <span class="token keyword">BY</span> <span class="token string">'auth_string'</span>
  <span class="token operator">|</span> IDENTIFIED <span class="token keyword">WITH</span> auth_plugin <span class="token keyword">AS</span> <span class="token string">'hash_string'</span>
  <span class="token operator">|</span> IDENTIFIED <span class="token keyword">BY</span> PASSWORD <span class="token string">'hash_string'</span>
}

tls_option: {
   SSL
 <span class="token operator">|</span> X509
 <span class="token operator">|</span> CIPHER <span class="token string">'cipher'</span>
 <span class="token operator">|</span> ISSUER <span class="token string">'issuer'</span>
 <span class="token operator">|</span> SUBJECT <span class="token string">'subject'</span>
}

resource_option: {
    MAX_QUERIES_PER_HOUR count
  <span class="token operator">|</span> MAX_UPDATES_PER_HOUR count
  <span class="token operator">|</span> MAX_CONNECTIONS_PER_HOUR count
  <span class="token operator">|</span> MAX_USER_CONNECTIONS count
}

password_option: {
    PASSWORD EXPIRE
  <span class="token operator">|</span> PASSWORD EXPIRE <span class="token keyword">DEFAULT</span>
  <span class="token operator">|</span> PASSWORD EXPIRE NEVER
  <span class="token operator">|</span> PASSWORD EXPIRE INTERVAL N DAY
}

lock_option: {
    ACCOUNT <span class="token keyword">LOCK</span>
  <span class="token operator">|</span> ACCOUNT UNLOCK
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="创建用户概述"><a href="#创建用户概述" class="headerlink" title="创建用户概述"></a>创建用户概述</h3><blockquote>
<p>对于每个帐户，CREATE USER 在mysql.user系统表中创建一个新行。帐户行反映了语句中指定的属性。未指定的属性设置为其默认值：</p>
</blockquote>
<ul>
<li><p>身份验证：由default_authentication_plugin 系统变量定义的身份验证插件 和空凭据</p>
</li>
<li><p>SSL / TLS： NONE</p>
</li>
<li><p>资源限制：无限制</p>
</li>
<li><p>密码管理： PASSWORD EXPIRE DEFAULT</p>
</li>
<li><p>帐户锁定： ACCOUNT UNLOCK</p>
</li>
</ul>
<p>首次创建帐户时没有权限。要分配权限，请使用该GRANT 语句。</p>
<p>每个帐户名称使用第6.2.3节“指定帐户名称”中所述的格式 。例如：</p>
<pre class="line-numbers language-sql"><code class="language-sql">
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">' IDENTIFIED BY '</span>password<span class="token string">';
帐户名的主机名部分（如果省略）默认为'</span><span class="token operator">%</span>'。

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>user命名帐户的 每个值后面都可以跟一个可选 auth_option值，该值指示帐户如何进行身份验证。这些值允许指定帐户身份验证插件和凭据（例如，密码）。每个 auth_option值适用 只到一个名为的前一个帐户。</p>
<p>遵循user规范，该语句可能包括SSL / TLS，资源限制，密码管理和锁定属性的选项。所有此类选项对于语句都是全局的，并且适用于语句中指定的 所有帐户。</p>
<blockquote>
<p>示例：创建使用默认身份验证插件和给定密码的帐户。标记密码已过期，以便用户必须在第一次连接到服务器时选择一个新密码：</p>
</blockquote>
<pre class="line-numbers language-sql"><code class="language-sql">
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">' 
  IDENTIFIED BY '</span>new_password' PASSWORD EXPIRE<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>示例：创建使用sha256_password身份验证插件和给定密码的帐户 。要求每180天选择一个新密码：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  IDENTIFIED WITH sha256_password BY '</span>new_password'
  PASSWORD EXPIRE INTERVAL <span class="token number">180</span> DAY<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>示例：此语句创建两个帐户，指定一些每帐户属性和一些全局属性：</p>
</blockquote>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span>
  <span class="token string">'jeffrey'</span>@'localhost<span class="token string">' IDENTIFIED WITH mysql_native_password
                                   BY '</span>new_password1<span class="token string">',
  '</span>jeanne<span class="token string">'@'</span>localhost<span class="token string">' IDENTIFIED WITH sha256_password
                                  BY '</span>new_password2'
  <span class="token keyword">REQUIRE</span> X509 <span class="token keyword">WITH</span> MAX_QUERIES_PER_HOUR <span class="token number">60</span>
  ACCOUNT <span class="token keyword">LOCK</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>每个auth_option值（IDENTIFIED WITH … BY在这种情况下）仅适用于紧接在其之前命名的帐户，因此每个帐户使用紧随其后的身份验证插件和密码。其余属性全局应用于语句中指定的所有帐户，因此对于两个帐户：</p>
<p>必须使用有效的X.509证书进行连接。</p>
<p>每小时最多允许60个查询。</p>
<p>该帐户最初是锁定的，因此它实际上是占位符，在管理员解锁之前无法使用。</p>
<h3 id="创建用户身份验证选项"><a href="#创建用户身份验证选项" class="headerlink" title="创建用户身份验证选项"></a>创建用户身份验证选项</h3><blockquote>
<p>帐户名后面可能是一个 auth_option身份验证选项，用于指定帐户身份验证插件，凭据或两者：</p>
</blockquote>
<ul>
<li><p>auth_plugin命名一个身份验证插件。插件名称可以是带引号的字符串文字或不带引号的名称。插件名称存储在系统表的plugin列中 mysql.user。</p>
</li>
<li><p>对于auth_option未指定身份验证插件的语法，默认插件由default_authentication_plugin 系统变量的值指示 。有关每个插件的说明，请参见 第6.5.1节“身份验证插件”。</p>
</li>
<li><p>凭据存储在系统表的 authentication_string列中 mysql.user。一个 或 值指定帐户凭据，无论是作为明文（未加密）的字符串或由与该帐户，分别相关联的认证插件所预期的格式散列： ‘auth_string’’hash_string’</p>
</li>
</ul>
<p>对于使用的语法， 字符串是明文，并传递给身份验证插件以进行可能的散列。插件返回的结果存储在 列中。插件可以使用指定的值，在这种情况下不会发生散列。 ‘auth_string’authentication_string</p>
<p>对于使用的语法， 假定字符串已经以身份验证插件所需的格式进行了哈希处理。如果散列格式不适合插件，则它将无法使用，并且不会发生客户端连接的正确身份验证。 ‘hash_string’</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span>允许这些 auth_option语法：

IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'auth_string'</span>

将帐户身份验证插件设置为默认插件，将明文 值传递 给插件以进行散列，并将结果存储在帐户行中。 <span class="token string">'auth_string'</span>mysql<span class="token punctuation">.</span><span class="token keyword">user</span>

IDENTIFIED <span class="token keyword">WITH</span> auth_plugin

将帐户身份验证插件设置为 auth_plugin，将凭据清除为空字符串，并将结果存储在mysql<span class="token punctuation">.</span><span class="token keyword">user</span>帐户行中。

IDENTIFIED <span class="token keyword">WITH</span> auth_plugin <span class="token keyword">BY</span> <span class="token string">'auth_string'</span>

将帐户身份验证插件设置为 auth_plugin，将明文 值传递 给插件以进行散列，并将结果存储在帐户行中。 <span class="token string">'auth_string'</span>mysql<span class="token punctuation">.</span><span class="token keyword">user</span>

IDENTIFIED <span class="token keyword">WITH</span> auth_plugin <span class="token keyword">AS</span> <span class="token string">'hash_string'</span>

将帐户身份验证插件设置为 auth_plugin并存储哈希 值，如帐户行中所示。假定该字符串已经以插件所需的格式进行了哈希处理。 <span class="token string">'hash_string'</span>mysql<span class="token punctuation">.</span><span class="token keyword">user</span>

IDENTIFIED <span class="token keyword">BY</span> PASSWORD <span class="token string">'hash_string'</span>

将帐户身份验证插件设置为默认插件，并将散列 值存储 在帐户行中。假定该字符串已经以插件所需的格式进行了哈希处理。 <span class="token string">'hash_string'</span>mysql<span class="token punctuation">.</span><span class="token keyword">user</span>

注意
IDENTIFIED <span class="token keyword">BY</span> PASSWORD 语法已弃用，将在未来的MySQL版本中删除。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>示例1：将密码指定为明文; 使用默认插件：</p>
</blockquote>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  IDENTIFIED BY '</span>password'<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>示例2：指定身份验证插件以及明文密码值：</p>
</blockquote>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  IDENTIFIED WITH mysql_native_password BY '</span>password<span class="token string">';
在每种情况下，存储在帐户行中的密码值是在与帐户关联的身份验证插件进行哈希处理后的明文值 。 '</span>password'
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>有关设置密码和身份验证插件的其他信息，请参见 第6.3.6节“分配帐户密码”和 第6.3.9节“可插入身份验证”。</p>
<h4 id="创建用户SSL-TLS选项"><a href="#创建用户SSL-TLS选项" class="headerlink" title="创建用户SSL / TLS选项"></a>创建用户SSL / TLS选项</h4><blockquote>
<p>除了基于用户名和凭据的常规身份验证之外，MySQL还可以检查X.509证书属性。有关在MySQL中使用SSL / TLS的背景信息，请参见第6.4节“使用加密连接”。</p>
</blockquote>
<p>要为MySQL帐户指定SSL / TLS相关选项，请使用REQUIRE指定一个或多个tls_option值的 子句 。</p>
<p>REQUIRE选项 顺序无关紧要，但不能指定选项两次。该 AND关键字是可选之间 REQUIRE选择。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span>允许这些 tls_option值：

NONE

表示该语句指定的所有帐户都没有SSL或X<span class="token number">.509</span>要求。如果用户名和密码有效，则允许未加密的连接。如果客户端具有适当的证书和密钥文件，则可以在客户端选择使用加密连接。

<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span><span class="token variable">@'localhost'</span> <span class="token keyword">REQUIRE</span> NONE<span class="token punctuation">;</span>
客户端默认尝试建立安全连接。对于具有<span class="token keyword">REQUIRE</span> NONE此功能的客户端，如果无法建立安全连接，则连接尝试将回退到未加密的连接。要求加密连接，客户端只需指定 <span class="token comment" spellcheck="true">--ssl-mode=REQUIRED 选项; 如果无法建立安全连接，则连接尝试失败。</span>

NONE如果未<span class="token keyword">REQUIRE</span>指定与SSL相关的选项，则为默认值 。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h5><p>告知服务器仅允许该语句指定的所有帐户的加密连接。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span><span class="token variable">@'localhost'</span> <span class="token keyword">REQUIRE</span> SSL<span class="token punctuation">;</span>
客户端默认尝试建立安全连接。对于具有的帐户，<span class="token keyword">REQUIRE</span> SSL如果无法建立安全连接，则连接尝试将失败。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h5 id="X509"><a href="#X509" class="headerlink" title="X509"></a>X509</h5><p>对于语句指定的所有帐户，要求客户端提供有效证书，但确切的证书，颁发者和主题无关紧要。唯一的要求是应该可以使用其中一个CA证书验证其签名。使用X.509证书总是意味着加密，因此SSL在这种情况下不需要该 选项。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span><span class="token variable">@'localhost'</span> <span class="token keyword">REQUIRE</span> X509<span class="token punctuation">;</span>
对于帐户<span class="token keyword">REQUIRE</span> X509，客户必须指定连接<span class="token comment" spellcheck="true">--ssl-key 和--ssl-cert选项。（建议但不要求 --ssl-ca也要指定，以便验证服务器提供的公共证书。）这是正确的ISSUER ，SUBJECT因为这些 REQUIRE选项意味着要求X509。</span>

ISSUER <span class="token string">'issuer'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于语句指定的所有帐户，要求客户端提供CA颁发的有效X.509证书 。如果客户端提供的证书有效但具有不同的颁发者，则服务器拒绝该连接。使用X.509证书总是意味着加密，因此在这种情况下不需要该 选项。 ‘issuer’SSL</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  REQUIRE ISSUER '</span><span class="token operator">/</span>C<span class="token operator">=</span>SE<span class="token operator">/</span>ST<span class="token operator">=</span>Stockholm<span class="token operator">/</span>L<span class="token operator">=</span>Stockholm<span class="token operator">/</span>
    O<span class="token operator">=</span>MySQL<span class="token operator">/</span>CN<span class="token operator">=</span>CA<span class="token operator">/</span>emailAddress<span class="token operator">=</span><span class="token number">ca</span><span class="token variable">@example.com</span>'<span class="token punctuation">;</span>
因为ISSUER暗示了要求X509，客户必须指定 <span class="token comment" spellcheck="true">--ssl-key和 --ssl-cert连接的选项。（建议但不要求 --ssl-ca也要指定，以便验证服务器提供的公共证书。）</span>

SUBJECT <span class="token string">'subject'</span>

对于语句指定的所有帐户，要求客户端提供包含主题的有效X<span class="token number">.509</span>证书subject。如果客户端提供有效但具有不同主题的证书，则服务器拒绝该连接。使用X<span class="token number">.509</span>证书总是意味着加密，因此SSL在这种情况下不需要该 选项。

<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  REQUIRE SUBJECT '</span><span class="token operator">/</span>C<span class="token operator">=</span>SE<span class="token operator">/</span>ST<span class="token operator">=</span>Stockholm<span class="token operator">/</span>L<span class="token operator">=</span>Stockholm<span class="token operator">/</span>
    O<span class="token operator">=</span>MySQL demo client certificate<span class="token operator">/</span>
    CN<span class="token operator">=</span>client<span class="token operator">/</span>emailAddress<span class="token operator">=</span>client<span class="token variable">@example.com</span><span class="token string">';
MySQL 对证书中的值进行了简单的字符串比较 ，因此必须完全按照证书中的名称给出字母和组件排序。 '</span>subject'
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因为SUBJECT暗示了要求X509，客户必须指定–ssl-key和 –ssl-cert连接的选项。（建议但不要求 –ssl-ca也要指定，以便验证服务器提供的公共证书。）</p>
<h5 id="CIPHER-‘cipher’"><a href="#CIPHER-‘cipher’" class="headerlink" title="CIPHER ‘cipher’"></a>CIPHER ‘cipher’</h5><p>对于语句指定的所有帐户，需要特定的密码方法来加密连接。需要此选项以确保使用具有足够强度的密码和密钥长度。如果使用使用短加密密钥的旧算法，则加密可能很弱。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">'
  REQUIRE CIPHER '</span>EDH<span class="token operator">-</span>RSA<span class="token operator">-</span>DES<span class="token operator">-</span>CBC3<span class="token operator">-</span>SHA<span class="token string">';
的SUBJECT，ISSUER和 CIPHER选项可以在组合中的 REQUIRE条款：

CREATE USER '</span>jeffrey<span class="token string">'@'</span>localhost<span class="token string">'
  REQUIRE SUBJECT '</span><span class="token operator">/</span>C<span class="token operator">=</span>SE<span class="token operator">/</span>ST<span class="token operator">=</span>Stockholm<span class="token operator">/</span>L<span class="token operator">=</span>Stockholm<span class="token operator">/</span>
    O<span class="token operator">=</span>MySQL demo client certificate<span class="token operator">/</span>
    CN<span class="token operator">=</span>client<span class="token operator">/</span>emailAddress<span class="token operator">=</span>client<span class="token variable">@example.com</span><span class="token string">'
  AND ISSUER '</span><span class="token operator">/</span>C<span class="token operator">=</span>SE<span class="token operator">/</span>ST<span class="token operator">=</span>Stockholm<span class="token operator">/</span>L<span class="token operator">=</span>Stockholm<span class="token operator">/</span>
    O<span class="token operator">=</span>MySQL<span class="token operator">/</span>CN<span class="token operator">=</span>CA<span class="token operator">/</span>emailAddress<span class="token operator">=</span><span class="token number">ca</span><span class="token variable">@example.com</span><span class="token string">'
  AND CIPHER '</span>EDH<span class="token operator">-</span>RSA<span class="token operator">-</span>DES<span class="token operator">-</span>CBC3<span class="token operator">-</span>SHA'<span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建用户资源限制选项<br>可以对帐户使用服务器资源设置限制，如第6.3.5节“设置帐户资源限制”中所述。为此，请使用WITH指定一个或多个resource_option值的子句。</p>
<h5 id="WITH选项-顺序无关紧要，除非多次指定给定的资源限制，最后一个实例优先。"><a href="#WITH选项-顺序无关紧要，除非多次指定给定的资源限制，最后一个实例优先。" class="headerlink" title="WITH选项 顺序无关紧要，除非多次指定给定的资源限制，最后一个实例优先。"></a>WITH选项 顺序无关紧要，除非多次指定给定的资源限制，最后一个实例优先。</h5><p>CREATE USER允许这些 resource_option值：</p>
<p>MAX_QUERIES_PER_HOUR count， ， MAX_UPDATES_PER_HOUR countMAX_CONNECTIONS_PER_HOUR count</p>
<p>对于语句指定的所有帐户，这些选项限制在任何给定的一小时内，每个帐户允许的服务器查询，更新和连接的数量。（从查询缓存中提供结果的查询不计入 MAX_QUERIES_PER_HOUR限制。）如果 count是0 （默认值），则表示该帐户没有限制。</p>
<p>MAX_USER_CONNECTIONS count</p>
<p>对于语句指定的所有帐户，限制每个帐户与服务器的最大并发连接数。非零 count指定帐户的限制。如果 count是0 （默认值），则服务器根据max_user_connections 系统变量的全局值确定帐户的并发连接数 。如果 max_user_connections也为零，则帐户没有限制。</p>
<p>例：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span><span class="token variable">@'localhost'</span>
  <span class="token keyword">WITH</span> MAX_QUERIES_PER_HOUR <span class="token number">500</span> MAX_UPDATES_PER_HOUR <span class="token number">100</span><span class="token punctuation">;</span>
创建用户密码管理选项
帐户密码具有年龄，根据最近更改密码的日期和时间进行评估。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>CREATE USER支持password_option密码到期管理的多个 值，手动使帐户密码失效或建立密码过期策略。策略选项不会使密码失效。相反，它们根据帐户密码年龄确定服务器如何将自动过期应用于帐户。对于给定帐户，其密码年龄是根据最近更改密码的日期和时间来评估的。</p>
<h3 id="本节介绍密码管理选项的语法。有关建立密码管理策略的信息，请参见-第6-3-7节“密码管理”。"><a href="#本节介绍密码管理选项的语法。有关建立密码管理策略的信息，请参见-第6-3-7节“密码管理”。" class="headerlink" title="本节介绍密码管理选项的语法。有关建立密码管理策略的信息，请参见 第6.3.7节“密码管理”。"></a>本节介绍密码管理选项的语法。有关建立密码管理策略的信息，请参见 第6.3.7节“密码管理”。</h3><p>这些选项仅适用于在mysql.user系统表（mysql_native_password或 sha256_password）内部存储凭据的帐户。对于使用对外部凭据系统执行身份验证的插件的帐户，还必须在外部针对该系统处理密码管理。</p>
<p>如果帐户密码手动过期或者密码年龄被认为大于其自动过期策略的允许生命周期，则客户端会话将以受限模式运行。在受限模式下，会话内执行的操作会导致错误，直到用户建立新的帐户密码。有关受限模式的信息，请参见 第6.3.8节“密码过期和沙箱模式”。</p>
<p>CREATE USER允许这些 password_option值来控制密码到期：</p>
<p>PASSWORD EXPIRE</p>
<p>立即为该语句指定的所有帐户标记密码已过期。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'jeffrey'</span>@'localhost<span class="token string">' PASSWORD EXPIRE;
PASSWORD EXPIRE DEFAULT

设置由语句命名的所有帐户，以便应用全局过期策略，如default_password_lifetime 系统变量所指定 。

CREATE USER '</span>jeffrey<span class="token string">'@'</span>localhost<span class="token string">' PASSWORD EXPIRE DEFAULT;
PASSWORD EXPIRE NEVER

此到期选项会覆盖该语句指定的所有帐户的全局策略。对于每个，它会禁用密码到期，以便密码永不过期。

CREATE USER '</span>jeffrey<span class="token string">'@'</span>localhost<span class="token string">' PASSWORD EXPIRE NEVER;
PASSWORD EXPIRE INTERVAL N DAY

此到期选项会覆盖该语句指定的所有帐户的全局策略。对于每个，它将密码生存期设置为N天。以下语句要求密码每180天更改一次：

CREATE USER '</span>jeffrey<span class="token string">'@'</span>localhost' PASSWORD EXPIRE INTERVAL <span class="token number">180</span> DAY<span class="token punctuation">;</span>
如果指定了多个密码管理选项，则最后一个选项优先。

创建用户帐户锁定选项
MySQL支持使用ACCOUNT <span class="token keyword">LOCK</span>和ACCOUNT UNLOCK选项进行帐户锁定和解锁 ，这些选项指定帐户的锁定状态。有关其他讨论，请参见 第<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">11</span>节“用户帐户锁定”。

如果指定了多个帐户锁定选项，则最后一个优先。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

            </div>
            <hr/>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">走一波赞赏</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone, qq, douban"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">Reprint please specify: </span>
                    <a href="https://dybl.github.io" class="b-link-green">FunU</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2018/10/14/mysql_create_user/" class="b-link-green">mysql-create_user</a>
                </p>
            </div>
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'f120cd4af15e4483511b',
        clientSecret: '0cbbd24d59314d1948516419787059bd2e44cfa7',
        repo: 'https://github.com/dybl/blog_backup',
        owner: 'dybl',
        admin: null,
        id: '2018-10-14T16-07-23',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">Previous</div>
            <div class="card">
                <a href="/2018/10/16/wechat-jump/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/19.jpg" class="responsive-img" alt="wechat-jump">
                        
                        <span class="card-title">wechat-jump</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">
关注 Python 的人想必都知道 跳一跳辅助外挂 这个项目近来在 Github 上火得不行，相信不少人也可能尝试过一番，并暗暗叹息，为什么我一开始就没有这个好想法呢！

现在，参照外挂项目的源码，我们就从零开始来自己动手写一个手动版本的</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2018-10-16
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/game/" class="post-category" target="_blank">
                                    game
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/" target="_blank">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">Next</div>
            <div class="card">
                <a href="/2018/10/12/hexo-theme/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/8.jpg" class="responsive-img" alt="hexo-theme">
                        
                        <span class="card-title">hexo-theme</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">hexo-theme-matery      
English Document | 演示示例

这是一个采用Material Design和响应式设计的 Hexo 博客主题。

特性
简单漂亮，文章内容美观易读
Material Desi</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2018-10-12
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-user fa-fw"></i>
                            Junjc9
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/hexo/" target="_blank">
                        <span class="chip bg-color">hexo</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>
    

</main>

<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            2018 &copy;<a href="http://dybl.github.io" target="_blank"> FunYou co.,ltd</a>
        </div>
        <div class="col s12 m4 l4 social-link">
            <a href="https://github.com/" class="tooltipped" target="_blank" data-tooltip="-> Gituhb"
                data-position="top" data-delay="50">
                <i class="fa fa-github fa-lg"></i>
            </a>
            <a href="mailto:xxx@example.com" class="tooltipped" target="_blank" data-tooltip="-> Email" data-position="top"
                data-delay="50">
                <i class="fa fa-envelope fa-lg"></i>
            </a>
            <a href="https://twitter.com" class="tooltipped" data-tooltip="-> Twitter" data-position="top" data-delay="50">
                <i class="fa fa-twitter fa-lg"></i>
            </a>
            <a href="https://facebook.com" class="tooltipped" data-tooltip="-> Facebook" data-position="top" data-delay="50">
                <i class="fa fa-facebook-official fa-lg"></i>
            </a>
            <a href="https://instagram.com" class="tooltipped" data-tooltip="-> Ins" data-position="top" data-delay="50">
                <i class="fa fa-instagram fa-lg"></i>
            </a>
        </div>
    </div>
</footer>

<div class="progress-bar"></div>



<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title">Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-double-up"></i>
    </a>
</div>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
    
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';                 
        }       
    });
    </script>
    

    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
    


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>
</body>
</html>